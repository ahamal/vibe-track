<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'">
  <title>Work Tracker Statistics</title>
  <link rel="stylesheet" href="stats.css">
</head>

<body>
  <div class="container">
    <header>
      <h1>Work Statistics</h1>
    </header>

    <!-- Today's Progress -->
    <section class="card today-progress">
      <div class="progress-ring-container">
        <canvas id="goalProgressChart" width="150" height="150"></canvas>
        <div class="progress-text">
          <span id="todayWorkTime">0h 0m</span>
          <span class="progress-label">of <span id="goalTime">8h</span></span>
        </div>
      </div>
      <div class="today-stats">
        <div class="stat">
          <span class="stat-value" id="todayPercentage">0%</span>
          <span class="stat-label">Goal Progress</span>
        </div>
        <div class="stat">
          <span class="stat-value" id="todaySessions">0</span>
          <span class="stat-label">Sessions</span>
        </div>
        <div class="stat">
          <span class="stat-value" id="currentStreak">0</span>
          <span class="stat-label">Day Streak</span>
        </div>
      </div>
    </section>

    <!-- Daily Activity Heatmap -->
    <section class="card">
      <div class="heatmap-header">
        <h2>Today's Activity</h2>
        <div class="date-nav">
          <button id="prevDay" class="nav-btn">←</button>
          <span id="currentDate">Today</span>
          <button id="nextDay" class="nav-btn">→</button>
        </div>
      </div>
      <div class="daily-heatmap">
        <div class="hour-labels" id="hourLabels"></div>
        <div class="hour-blocks" id="hourBlocks"></div>
      </div>
      <div class="heatmap-legend">
        <span class="legend-label">No activity</span>
        <div class="legend-box level-0"></div>
        <div class="legend-box level-1"></div>
        <div class="legend-box level-2"></div>
        <div class="legend-box level-3"></div>
        <div class="legend-box level-4"></div>
        <span class="legend-label">Full hour</span>
      </div>
    </section>

    <!-- Project Breakdown -->
    <section class="card">
      <h2>Time by Project</h2>
      <div class="chart-row">
        <div class="chart-container pie-chart">
          <canvas id="projectPieChart" width="200" height="200"></canvas>
        </div>
        <div class="project-list" id="projectList">
          <!-- Populated by JS -->
        </div>
      </div>
    </section>

    <!-- Summary Stats -->
    <section class="card summary-stats">
      <h2>Summary</h2>
      <div class="stats-grid">
        <div class="stat-item">
          <span class="stat-value" id="totalWorkTime">0h</span>
          <span class="stat-label">Total Work Time</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="avgDailyTime">0h</span>
          <span class="stat-label">Daily Average</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="totalSessions">0</span>
          <span class="stat-label">Total Sessions</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="goalsReached">0</span>
          <span class="stat-label">Goals Reached</span>
        </div>
      </div>
    </section>

    <!-- Export -->
    <section class="card export-section">
      <h2>Export Data</h2>
      <div class="export-buttons">
        <button id="exportCSV" class="export-btn">Export to CSV</button>
        <button id="exportJSON" class="export-btn">Export to JSON</button>
      </div>
    </section>
  </div>

  <script src="stats.js"></script>
</body>

</html>